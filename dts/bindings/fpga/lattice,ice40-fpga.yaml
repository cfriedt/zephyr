# Copyright (c) 2022 Friedt Professional Engineering Services, Inc
# SPDX-License-Identifier: Apache-2.0

description: Lattice iCE40 FPGA

compatible: "lattice,ice40-fpga"

include: spi-device.yaml

properties:
    cdone-gpios:
      type: phandle-array
      required: true
      description: |
        Configuration Done output from iCE40.
        
        Example usage: 
        cdone-gpios = <&gpio0 18 0>;

    creset-gpios:
      type: phandle-array
      required: true
      description: |
        Configuration Reset input on iCE40.
        
        Example usage: 
        creset-gpios = <&gpio0 19 GPIO_OPEN_DRAIN>;
    
    creset-delay-ns:
      type: int
      required: false
      description: |
        Delay (in nanoseconds) between asserting CRESET_B and releasing CRESET_B.

        Example usage:
        creset-delay-ns = <200>;

    config-delay-us:
      type: int
      required: false
      description: |
        Delay (in microseconds) after releasing CRESET_B to clear internal configuration memory.

        Example usage:
        config-delay-us = <300>;

    leading-clocks:
      type: int
      required: false
      description: |
        Prior to sending the bitstream, issue this number of leading clocks with SPI_CS pulled high.

        Example usage:
        leading-clocks = <8>;

    trailing-clocks:
      type: int
      required: false
      description: |
        After sending the bitstream, issue this number of trailing clocks with SPI_CS pulled high.

        Example usage:
        trailing-clocks = <149>;
